{"version":3,"sources":["components/Cell.module.css","App.module.css","components/Board.module.css","App.js","components/Cell.jsx","components/Board.jsx","components/Score.jsx","index.js","components/Score.module.css"],"names":["module","exports","Cell","React","memo","status","id","onClick","content","console","log","className","cn","styles","cell","changeCellStatus","state","newStatus","map","includes","Board","cellsState","setCellsState","incMoves","gameStatus","setGameStatus","moves","setBestScore","openedCells","useRef","useEffect","current","length","find","opened","filter","setTimeout","every","localStorage","setItem","onCLick","useCallback","push","wrapper","start","hidden","success","start__text","Score","best","score","output","board","i","shuffle","array","tmp","j","Math","floor","random","App","useState","setMoves","getItem","bestScore","restart","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9948e484.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"cell\":\"Cell_cell__LhVds\",\"closed\":\"Cell_closed__2FibX\",\"opened\":\"Cell_opened__3Gzez\",\"done\":\"Cell_done__1CS9a\",\"fail\":\"Cell_fail__3URfI\",\"bg0\":\"Cell_bg0__HeDjx\",\"bg1\":\"Cell_bg1__2hZg0\",\"bg2\":\"Cell_bg2__2-nIq\",\"bg3\":\"Cell_bg3__3aPAu\",\"bg4\":\"Cell_bg4__1bbh1\",\"bg5\":\"Cell_bg5__3b9AQ\",\"bg6\":\"Cell_bg6__3gKku\",\"bg7\":\"Cell_bg7__2lfJI\",\"bg8\":\"Cell_bg8__2lBmZ\",\"bg9\":\"Cell_bg9__dxkgx\",\"bg10\":\"Cell_bg10__3IGmg\",\"bg11\":\"Cell_bg11__C5THu\",\"bg12\":\"Cell_bg12__6IczA\",\"bg13\":\"Cell_bg13__SF2h0\",\"bg14\":\"Cell_bg14__Q99sq\",\"bg15\":\"Cell_bg15__1sxmV\",\"bg16\":\"Cell_bg16__DSb_2\",\"bg17\":\"Cell_bg17__2fjIb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"restart\":\"App_restart__3LjsW\",\"rotate\":\"App_rotate__19cmB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Board_wrapper__B0n9X\",\"start\":\"Board_start__2u6mK\",\"success\":\"Board_success__1xunf\",\"start__text\":\"Board_start__text__2QZuU\",\"vibrate\":\"Board_vibrate__1fGWa\",\"hidden\":\"Board_hidden__1fgpJ\"};","import React, { useCallback, useState } from 'react';\nimport Board from './components/Board';\nimport Score from './components/Score';\nimport styles from './App.module.css';\n\nconst board = [];\n\nfor (let i = 0; i < 36; i++) {\n\tboard.push({ status: 'closed', id: i, content: `bg${ i < 18 ? i : i % 18 }` });\n}\n\nconst shuffle = (array) => {\n\tlet tmp = [ ...array ];\n\tfor (let i = tmp.length - 1; i > 0; i--) {\n\t\tlet j = Math.floor(Math.random() * (i + 1));\n\t\t[ tmp[i], tmp[j] ] = [ tmp[j], tmp[i] ];\n\t}\n\treturn tmp;\n};\n\nfunction App() {\n\tconst [ moves, setMoves ] = useState(0);\n\tconst [ bestScore, setBestScore ] = useState(+localStorage.getItem('best-score') || 0);\n\tconst [ gameStatus, setGameStatus ] = useState('ready');\n\tconst [ cellsState, setCellsState ] = useState(shuffle(board));\n\n\tconst incMoves = useCallback(() => {\n\t\tsetMoves(moves => ++moves);\n\t}, []);\n\n\tconst restart = useCallback(() => {\n\t\tsetGameStatus('ready');\n\t\tsetMoves(0);\n\t\tsetCellsState(shuffle(board));\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Board cellsState={ cellsState } setCellsState={ setCellsState } moves={ moves } incMoves={ incMoves }\n\t\t\t\t   gameStatus={ gameStatus } setGameStatus={ setGameStatus } setBestScore={ setBestScore }/>\n\t\t\t<Score moves={ moves } best={ bestScore }/>\n\t\t\t<button className={ styles.restart } onClick={ restart }/>\n\t\t</>\n\t);\n}\n\nexport default App;\n","import React from 'react';\r\nimport cn from 'classnames';\r\nimport styles from './Cell.module.css';\r\n\r\nconst Cell = React.memo(({ status, id, onClick, content }) => {\r\n\tconsole.log('render' + id);\r\n\treturn (\r\n\t\t<div className={ cn(styles.cell, styles[content], styles[status]) } onClick={ () => onClick(id) }/>\r\n\t);\r\n});\r\n\r\nexport default Cell;","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport styles from './Board.module.css';\r\nimport cn from 'classnames';\r\nimport Cell from './Cell';\r\n\r\nconst changeCellStatus = (state, newStatus, ...id) => {\r\n\treturn state.map(cell => id.includes(cell.id) ? { ...cell, status: newStatus } : cell);\r\n};\r\n\r\nconst Board = ({ cellsState, setCellsState, incMoves, gameStatus, setGameStatus, moves, setBestScore }) => {\r\n\tconst openedCells = useRef([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (openedCells.current.length === 2 && !cellsState.find(cell => cell.status === 'fail')) {\r\n\t\t\tconst opened = cellsState.filter(cell => openedCells.current.includes(cell.id));\r\n\t\t\tif (opened[0].content === opened[1].content) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tsetCellsState(cellsState => changeCellStatus(cellsState, 'done', opened[0].id, opened[1].id));\r\n\t\t\t\t}, 300);\r\n\t\t\t\topenedCells.current = [];\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tsetCellsState(cellsState => cellsState.map(cell => {\r\n\t\t\t\t\t\treturn cell.status === 'opened' ? { ...cell, status: 'fail' } : cell;\r\n\t\t\t\t\t}));\r\n\t\t\t\t}, 500);\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tsetCellsState(cellsState => changeCellStatus(cellsState, 'closed', opened[0].id, opened[1].id));\r\n\t\t\t\t\topenedCells.current = [];\r\n\t\t\t\t}, 1500);\r\n\t\t\t}\r\n\t\t\tincMoves();\r\n\t\t}\r\n\t}, [ cellsState, incMoves, setCellsState ]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (cellsState.every(cell => cell.status === 'done')) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetGameStatus('success');\r\n\t\t\t\tsetBestScore(moves);\r\n\t\t\t\tlocalStorage.setItem('best-score', moves);\r\n\t\t\t}, 500);\r\n\t\t}\r\n\t}, [ cellsState, setGameStatus, moves, setBestScore ]);\r\n\r\n\tconst onCLick = useCallback((id) => {\r\n\t\tif (openedCells.current.length === 2) return;\r\n\t\topenedCells.current.push(id);\r\n\t\tsetCellsState((cellsState) => changeCellStatus(cellsState, 'opened', id));\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className={ styles.wrapper }>\r\n\t\t\t{\r\n\t\t\t\tcellsState.map((cell) => {\r\n\t\t\t\t\treturn <Cell key={ cell.id } status={ cell.status } id={ cell.id } content={ cell.content }\r\n\t\t\t\t\t\t\t\t onClick={ onCLick }/>;\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t<div className={ cn(styles.start, {\r\n\t\t\t\t[styles.hidden]: gameStatus === 'started',\r\n\t\t\t\t[styles.success]: gameStatus === 'success'\r\n\t\t\t}) }>\r\n\t\t\t\t<span className={ cn(styles.start__text, {\r\n\t\t\t\t\t[styles.hidden]: gameStatus !== 'ready'\r\n\t\t\t\t}) } onClick={ () => setGameStatus('started') }>\r\n\t\t\t\t\tPress to start\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className={ cn(styles.success, {\r\n\t\t\t\t\t[styles.hidden]: gameStatus !== 'success',\r\n\t\t\t\t}) }>\r\n\t\t\t\t\tSuccess<br/>\r\n\t\t\t\t\tMoves: { moves }\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Board;","import React from 'react';\r\nimport styles from './Score.module.css';\r\n\r\nconst Score = ({ moves, best }) => {\r\n\r\n\treturn (\r\n\t\t<div className={ styles.wrapper }>\r\n\t\t\t<div className={ styles.score }>\r\n\t\t\t\tYour best<br/> score:\r\n\t\t\t\t<span className={ styles.output }>\r\n\t\t\t\t\t{ best }\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div className={ styles.score }>\r\n\t\t\t\tCurrent<br/> moves:\r\n\t\t\t\t<span className={ styles.output }>\r\n\t\t\t\t\t{ moves }\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Score;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Score_wrapper__11QJl\",\"score\":\"Score_score__2cOhi\",\"output\":\"Score_output__2Dbmw\"};"],"sourceRoot":""}